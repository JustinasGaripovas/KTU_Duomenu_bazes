RewriteEngine on
RewriteRule ^.+$ /index.php [L]
RewriteCond %{HTTPS} !=on
RewriteRule ^?(.*) https://%{SERVER_NAME}/%1 [R,L]