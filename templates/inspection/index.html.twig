{% extends 'base.html.twig' %}
{% trans_default_domain 'translation' %}
{% block title %} {% trans %}Inspection {% endtrans %}{% endblock %}

{% block body %}
    <h2>{% trans %}Inspection {% endtrans %} </h2>
    <a class="btn btn-success btn-block btn-lg" href="{{ path('inspection_new') }}"><i class="fa fa-plus-square"></i> {% trans %} New {% endtrans %}</a>
    <a class="btn btn-light btn-block btn-lg" href="{{ path('main') }}">{% trans %}back to list{% endtrans %}</a>
    <br>
    <table class="table table-sm thead-dark table-bordered">
        <thead>
            <tr>
                <th style="text-align: center; vertical-align: middle"> {% trans %} RoadId {% endtrans %}</th>
                <th style="text-align: center"> {% trans %} Inspection Note {% endtrans %} </th>
                <th style="text-align: center; vertical-align: middle"> {% trans %} Inspection Date {% endtrans %} </th>
                <th style="text-align: center; vertical-align: middle"> {% trans %} RepairDate {% endtrans %} </th>
                <th style="text-align: center; vertical-align: middle"> {% trans %} Username {% endtrans %} </th>
                <th> </th>
            </tr>
        </thead>
        <tbody>
        {% for inspection in pagination %}
            <tr {% if loop.index is odd %}class="color"{% endif %}>
            <tr>
                <td style="text-align: center; vertical-align: middle">{{ inspection.RoadId }}</td>
                <td style="text-align: center; vertical-align: middle">{{ inspection.Note }}</td>
                <td style="text-align: center; vertical-align: middle">{{ inspection.RepairDate ? inspection.RepairDate|date('Y-m-d') : '' }}</td>
                <td style="text-align: center; vertical-align: middle">
                    {% for job in inspection.getJob %}
                        {% if job.DoneJobDate != null %}
                        <a href="{{ path('done_jobs_show', {'id': job.Id}) }}">{{ job.DoneJobDate ? job.DoneJobDate|date('Y-m-d')  : '' }}</a>
                            <br>
                    {% endif %}
                    {% endfor %}
                    <a class="btn btn-success" href="{{ path('done_jobs_add_job_to_inspection', {'id': inspection.Id}) }}">
                        <i class="fa fa-plus-circle"></i> {% trans %} Add {% endtrans %}</a>
                <td style="text-align: center; vertical-align: middle">{{ inspection.Username }}</td>
                <td style="text-align: center; vertical-align: middle">
                    <a href="{{ path('inspection_show', {'id': inspection.id}) }}">show</a>
                    <a href="{{ path('inspection_edit', {'id': inspection.id}) }}">edit</a>
                </td>
            </tr>
        {% else %}
            <tr>
                <td colspan="5">no records found</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    <div class="navigation d-flex justify-content-center">
        {{ knp_pagination_render(pagination) }}
    </div>
{% endblock %}